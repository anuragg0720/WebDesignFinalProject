<header class="py-3 border-bottom bg-body-tertiary">
  <div class="container d-flex flex-column gap-2">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-2">
        <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Chat</li>
      </ol>
    </nav>
    <div class="d-flex align-items-center gap-2">
      <h1 class="h3 fw-bold mb-0 text-dark">
        <i class="bi bi-chat-dots me-2"></i>
        Chat with HUSKY AI
      </h1>
      <span class="badge text-bg-success">online</span>
      <span class="ms-auto small text-secondary">Signed in as <strong>Student</strong></span>
    </div>
  </div>
</header>

<main class="section py-4">
  <div class="container">
    <div class="row g-4">
      <!-- Chat column -->
      <div class="col-12 col-lg-8">
        <div class="card shadow-sm chat-wrapper">
          <div class="card-header d-flex align-items-center gap-2">
            <i class="bi bi-robot"></i>
            <strong>HUSKY AI</strong>
            <span class="small text-secondary ms-auto">Answers link official NU pages</span>
          </div>

          <div class="card-body d-flex flex-column">
            <!-- Messages -->
            <div id="messages" class="chat-scroll pe-1" aria-live="polite">
              <div
                *ngFor="let msg of messages"
                class="chat-message mb-3 d-flex"
                [ngClass]="{ 'justify-content-end': msg.from === 'user' }"
              >
                <div
                  class="chat-bubble px-3 py-2 rounded-4"
                  [ngClass]="{
                    'bg-primary text-white': msg.from === 'user',
                    'bg-body-tertiary': msg.from === 'assistant'
                  }"
                >
                  {{ msg.text }}
                </div>
              </div>

              <div *ngIf="loading" class="text-secondary small mt-2">
                Husky AI is thinking…
              </div>
            </div>

            <!-- Input -->
            <form class="mt-3" (ngSubmit)="send()">
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Ask anything about Northeastern…"
                  [(ngModel)]="input"
                  name="chatInput"
                  autocomplete="off"
                />
                <button class="btn btn-primary" type="submit" [disabled]="loading || !input.trim()">
                  <span *ngIf="!loading">Send</span>
                  <span *ngIf="loading">
                    <span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
                    Sending…
                  </span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Sidebar column -->
      <div class="col-12 col-lg-4">
        <div class="card shadow-sm mb-3">
          <div class="card-header fw-semibold">Suggested prompts</div>
          <div class="card-body d-flex flex-wrap gap-2">
            <button
              type="button"
              class="btn btn-outline-secondary btn-sm"
              (click)="usePrompt('How do I pay tuition?')"
            >
              How do I pay tuition?
            </button>
            <button
              type="button"
              class="btn btn-outline-secondary btn-sm"
              (click)="usePrompt('How do I book advising?')"
            >
              How do I book advising?
            </button>
            <button
              type="button"
              class="btn btn-outline-secondary btn-sm"
              (click)="usePrompt('Where do I get my Husky Card?')"
            >
              Where do I get my Husky Card?
            </button>
          </div>
        </div>

        <div class="card shadow-sm">
          <div class="card-header fw-semibold">Key links</div>
          <ul class="list-group list-group-flush small">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Academic Calendar
              <i class="bi bi-box-arrow-up-right text-secondary"></i>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Student Financial Services
              <i class="bi bi-box-arrow-up-right text-secondary"></i>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Advising Portal
              <i class="bi bi-box-arrow-up-right text-secondary"></i>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Husky Card Services
              <i class="bi bi-box-arrow-up-right text-secondary"></i>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</main>